{"filter":false,"title":"recover.c","tooltip":"~/workspace/pset3/recover/recover.c","undoManager":{"mark":30,"position":30,"stack":[[{"start":{"row":0,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","","}",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":77,"column":1},"action":"insert","lines":["#include <stdio.h>","","int main(int argc, char* argv[])","{","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: ./recover card.raw\\n\");","        return 1;","    }","    ","    char* infile = argv[1];","    ","    // size of the block that will be read and written","    const int BLOCK_SIZE = 512;","    ","    // open input file ","    FILE* inptr = fopen(infile, \"r\");","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","    ","    unsigned char buffer[BLOCK_SIZE];","    ","    // pointer to outfile","    FILE* outptr = NULL;","    ","    // make space for jpg file name","    char image[7];","    ","    // number of image files created","    int n = 0;","","    // search until jpg is found","    while(fread(buffer, BLOCK_SIZE, 1, inptr) == 1)","    {","        // find the beginning of an jpg","        if (buffer[0] == 0xff && buffer[1] == 0xd8 && buffer[2] == 0xff &&","            buffer[3] >= 0xe0 && buffer[3] <= 0xef)","        {","            // close image file if one has been created","            if (n > 0)","            {","                fclose(outptr);","            }","            // make name for nth image","            sprintf(image, \"%03d.jpg\", n);","            ","            // open nth image file","            outptr = fopen(image, \"w\");","            if (outptr == NULL)","            {","                fprintf(stderr, \"Could not create %s.\\n\", image);","                return 3;","            }","            ","            // increment number of image files created","            n++;","        }","        ","        // write to image file only if one exists ","        if (outptr != NULL)","        {","            // write to image file","            fwrite(buffer, BLOCK_SIZE, 1, outptr);","        }","    }","    ","    // close last image file","    fclose(outptr);","    ","    // close card.raw","    fclose(inptr);","    ","    // that's all folks","    return 0;","}"]}],[{"start":{"row":12,"column":3},"end":{"row":12,"column":54},"action":"remove","lines":[" // size of the block that will be read and written"],"id":3}],[{"start":{"row":15,"column":0},"end":{"row":15,"column":23},"action":"remove","lines":["    // open input file "],"id":4}],[{"start":{"row":25,"column":3},"end":{"row":25,"column":25},"action":"remove","lines":[" // pointer to outfile"],"id":5}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":35},"action":"remove","lines":["    // make space for jpg file name"],"id":6}],[{"start":{"row":31,"column":0},"end":{"row":31,"column":36},"action":"remove","lines":["    // number of image files created"],"id":7}],[{"start":{"row":33,"column":0},"end":{"row":34,"column":32},"action":"remove","lines":["","    // search until jpg is found"],"id":8}],[{"start":{"row":40,"column":11},"end":{"row":40,"column":55},"action":"remove","lines":[" // close image file if one has been created"],"id":9}],[{"start":{"row":36,"column":8},"end":{"row":36,"column":39},"action":"remove","lines":["// find the beginning of an jpg"],"id":10}],[{"start":{"row":45,"column":12},"end":{"row":45,"column":38},"action":"remove","lines":["// make name for nth image"],"id":11}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":34},"action":"remove","lines":["  // open nth image file"],"id":12}],[{"start":{"row":74,"column":1},"end":{"row":74,"column":23},"action":"remove","lines":["   // that's all folks"],"id":13}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":21},"action":"remove","lines":["    // close card.raw"],"id":14}],[{"start":{"row":68,"column":0},"end":{"row":68,"column":28},"action":"remove","lines":["    // close last image file"],"id":15}],[{"start":{"row":63,"column":7},"end":{"row":63,"column":34},"action":"remove","lines":["     // write to image file"],"id":16}],[{"start":{"row":60,"column":0},"end":{"row":60,"column":50},"action":"remove","lines":["        // write to image file only if one exists "],"id":17}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":54},"action":"remove","lines":["// increment number of image files created"],"id":18}],[{"start":{"row":12,"column":3},"end":{"row":12,"column":53},"action":"insert","lines":["// size of the block that will be read and written"],"id":19}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":36},"action":"remove","lines":[" that will be"],"id":20},{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"remove","lines":["k"]},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"remove","lines":["c"]},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"remove","lines":["o"]},{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"remove","lines":["l"]}],[{"start":{"row":12,"column":18},"end":{"row":12,"column":19},"action":"remove","lines":["b"],"id":21},{"start":{"row":12,"column":17},"end":{"row":12,"column":18},"action":"remove","lines":[" "]},{"start":{"row":12,"column":16},"end":{"row":12,"column":17},"action":"remove","lines":["e"]},{"start":{"row":12,"column":15},"end":{"row":12,"column":16},"action":"remove","lines":["h"]},{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"remove","lines":["t"]},{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"remove","lines":[" "]}],[{"start":{"row":15,"column":0},"end":{"row":15,"column":19},"action":"insert","lines":["// open input file "],"id":22}],[{"start":{"row":25,"column":3},"end":{"row":25,"column":22},"action":"insert","lines":["// open input file "],"id":23}],[{"start":{"row":25,"column":6},"end":{"row":25,"column":17},"action":"remove","lines":["open input "],"id":24},{"start":{"row":25,"column":6},"end":{"row":25,"column":7},"action":"insert","lines":["c"]},{"start":{"row":25,"column":7},"end":{"row":25,"column":8},"action":"insert","lines":["l"]},{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"insert","lines":["o"]},{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"insert","lines":["s"]},{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"insert","lines":["e"]}],[{"start":{"row":25,"column":11},"end":{"row":25,"column":12},"action":"insert","lines":[" "],"id":25}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":32},"action":"insert","lines":["    // search until jpg is found"],"id":26}],[{"start":{"row":33,"column":14},"end":{"row":33,"column":19},"action":"remove","lines":["until"],"id":27}],[{"start":{"row":33,"column":19},"end":{"row":33,"column":27},"action":"remove","lines":["is found"],"id":28}],[{"start":{"row":33,"column":19},"end":{"row":33,"column":20},"action":"insert","lines":["f"],"id":29},{"start":{"row":33,"column":20},"end":{"row":33,"column":21},"action":"insert","lines":["i"]},{"start":{"row":33,"column":21},"end":{"row":33,"column":22},"action":"insert","lines":["l"]},{"start":{"row":33,"column":22},"end":{"row":33,"column":23},"action":"insert","lines":["e"]}],[{"start":{"row":68,"column":0},"end":{"row":68,"column":24},"action":"insert","lines":["// close last image file"],"id":30}],[{"start":{"row":68,"column":9},"end":{"row":68,"column":13},"action":"remove","lines":["last"],"id":31}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"remove","lines":["    "],"id":32},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"remove","lines":["    "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"remove","lines":["    "]},{"start":{"row":15,"column":18},"end":{"row":15,"column":19},"action":"remove","lines":[" "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"remove","lines":["    "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"remove","lines":["    "]},{"start":{"row":25,"column":16},"end":{"row":25,"column":17},"action":"remove","lines":[" "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"remove","lines":["    "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":8},"action":"remove","lines":["        "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":11},"action":"remove","lines":["           "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":12},"action":"remove","lines":["            "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":12},"action":"remove","lines":["            "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":10},"action":"remove","lines":["          "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":12},"action":"remove","lines":["            "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":12},"action":"remove","lines":["            "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":8},"action":"remove","lines":["        "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":7},"action":"remove","lines":["       "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":4},"action":"remove","lines":["    "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":4},"action":"remove","lines":["    "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":4},"action":"remove","lines":["    "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":1},"action":"remove","lines":[" "]}]]},"ace":{"folds":[],"scrolltop":530,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":76,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":37,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1557412309947,"hash":"3b559ac5fd6cccb0da60b937461e5bf14d29d43f"}